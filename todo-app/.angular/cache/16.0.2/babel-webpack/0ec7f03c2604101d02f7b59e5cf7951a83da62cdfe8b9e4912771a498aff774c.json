{"ast":null,"code":"import { createReducer, on } from '@ngrx/store';\nimport * as Actions from './todo.actions';\nexport const initialState = {\n  todos: [],\n  error: \"\",\n  isLoading: false\n};\nexport const todoReducer = createReducer(\n// Supply the initial state\ninitialState,\n// Add the new todo to the todos array\non(Actions.addTodo, (state, {\n  todo\n}) => ({\n  ...state,\n  todos: [...state.todos, todo],\n  error: \"\",\n  isLoading: false\n})), on(Actions.editTodo, (state, {\n  id,\n  todo\n}) => ({\n  ...state,\n  todos: [...state.todos.slice(0, id), todo, ...state.todos.slice(id + 1)]\n})),\n// Remove the todo from the todos array\non(Actions.removeTodo, (state, {\n  id\n}) => ({\n  ...state,\n  todos: state.todos.filter(todo => todo.id !== id)\n})),\n// Switch completed property false -> true, true -> false\non(Actions.handleCompleted, (state, {\n  id\n}) => ({\n  ...state,\n  todos: state.todos.map(element => {\n    if (element.id === id) {\n      return {\n        ...element,\n        completed: !element.completed\n      };\n    }\n    return element;\n  })\n})),\n// Trigger loading the todos\non(Actions.loadTodos, state => ({\n  ...state,\n  isLoading: true\n})),\n// Handle successfully loaded todos\non(Actions.loadTodosSuccess, (state, {\n  todos\n}) => ({\n  ...state,\n  todos: todos,\n  error: \"\",\n  isLoading: false\n})),\n// Handle todos load failure\non(Actions.loadTodosFailure, (state, {\n  error\n}) => ({\n  ...state,\n  error: error,\n  isLoading: false\n})));","map":{"version":3,"names":["createReducer","on","Actions","initialState","todos","error","isLoading","todoReducer","addTodo","state","todo","editTodo","id","slice","removeTodo","filter","handleCompleted","map","element","completed","loadTodos","loadTodosSuccess","loadTodosFailure"],"sources":["C:\\Angular\\todo-app\\src\\app\\state\\todos\\todo.reducer.ts"],"sourcesContent":["import { createReducer, on } from '@ngrx/store';\r\nimport *  as Actions from './todo.actions';\r\nimport { Todo } from 'src/app/models/Todo';\r\n\r\nexport interface TodoState {\r\n  todos: Todo[];\r\n  error: string;\r\n  isLoading: boolean,\r\n}\r\n\r\nexport const initialState: TodoState = {\r\n  todos: [],\r\n  error: \"\",\r\n  isLoading: false,\r\n};\r\n\r\nexport const todoReducer = createReducer(\r\n  // Supply the initial state\r\n  initialState,\r\n\r\n\r\n  // Add the new todo to the todos array\r\n  on(Actions.addTodo, (state, { todo }) => ({\r\n    ...state,\r\n    todos: [...state.todos, todo],\r\n    error: \"\",\r\n    isLoading: false\r\n  })),\r\n\r\n  on(Actions.editTodo, (state, { id, todo }) => ({\r\n    ...state, \r\n    todos: [...state.todos.slice(0, id), todo, ...state.todos.slice(id + 1)]\r\n  })),\r\n\r\n\r\n  // Remove the todo from the todos array\r\n  on(Actions.removeTodo, (state, { id }) => ({\r\n    ...state,\r\n    todos: state.todos.filter((todo) => todo.id !== id),\r\n  })),\r\n\r\n  // Switch completed property false -> true, true -> false\r\n  on(Actions.handleCompleted, (state, { id }) => ({\r\n    ...state,\r\n    todos: state.todos.map((element) => {\r\n        if (element.id === id) {\r\n          return {\r\n            ...element,\r\n            completed: !element.completed,\r\n          };\r\n        }\r\n        return element;\r\n      })\r\n  })),\r\n\r\n  // Trigger loading the todos\r\n  on(Actions.loadTodos, (state) => ({ ...state, isLoading: true })),\r\n\r\n\r\n  // Handle successfully loaded todos\r\n  on(Actions.loadTodosSuccess, (state, { todos }) => ({\r\n    ...state,\r\n    todos: todos,\r\n    error: \"\",\r\n    isLoading: false,\r\n  })),\r\n\r\n  \r\n  // Handle todos load failure\r\n  on(Actions.loadTodosFailure, (state, { error }) => ({\r\n    ...state,\r\n    error: error,\r\n    isLoading: false,\r\n  }))\r\n);"],"mappings":"AAAA,SAASA,aAAa,EAAEC,EAAE,QAAQ,aAAa;AAC/C,OAAO,KAAMC,OAAO,MAAM,gBAAgB;AAS1C,OAAO,MAAMC,YAAY,GAAc;EACrCC,KAAK,EAAE,EAAE;EACTC,KAAK,EAAE,EAAE;EACTC,SAAS,EAAE;CACZ;AAED,OAAO,MAAMC,WAAW,GAAGP,aAAa;AACtC;AACAG,YAAY;AAGZ;AACAF,EAAE,CAACC,OAAO,CAACM,OAAO,EAAE,CAACC,KAAK,EAAE;EAAEC;AAAI,CAAE,MAAM;EACxC,GAAGD,KAAK;EACRL,KAAK,EAAE,CAAC,GAAGK,KAAK,CAACL,KAAK,EAAEM,IAAI,CAAC;EAC7BL,KAAK,EAAE,EAAE;EACTC,SAAS,EAAE;CACZ,CAAC,CAAC,EAEHL,EAAE,CAACC,OAAO,CAACS,QAAQ,EAAE,CAACF,KAAK,EAAE;EAAEG,EAAE;EAAEF;AAAI,CAAE,MAAM;EAC7C,GAAGD,KAAK;EACRL,KAAK,EAAE,CAAC,GAAGK,KAAK,CAACL,KAAK,CAACS,KAAK,CAAC,CAAC,EAAED,EAAE,CAAC,EAAEF,IAAI,EAAE,GAAGD,KAAK,CAACL,KAAK,CAACS,KAAK,CAACD,EAAE,GAAG,CAAC,CAAC;CACxE,CAAC,CAAC;AAGH;AACAX,EAAE,CAACC,OAAO,CAACY,UAAU,EAAE,CAACL,KAAK,EAAE;EAAEG;AAAE,CAAE,MAAM;EACzC,GAAGH,KAAK;EACRL,KAAK,EAAEK,KAAK,CAACL,KAAK,CAACW,MAAM,CAAEL,IAAI,IAAKA,IAAI,CAACE,EAAE,KAAKA,EAAE;CACnD,CAAC,CAAC;AAEH;AACAX,EAAE,CAACC,OAAO,CAACc,eAAe,EAAE,CAACP,KAAK,EAAE;EAAEG;AAAE,CAAE,MAAM;EAC9C,GAAGH,KAAK;EACRL,KAAK,EAAEK,KAAK,CAACL,KAAK,CAACa,GAAG,CAAEC,OAAO,IAAI;IAC/B,IAAIA,OAAO,CAACN,EAAE,KAAKA,EAAE,EAAE;MACrB,OAAO;QACL,GAAGM,OAAO;QACVC,SAAS,EAAE,CAACD,OAAO,CAACC;OACrB;;IAEH,OAAOD,OAAO;EAChB,CAAC;CACJ,CAAC,CAAC;AAEH;AACAjB,EAAE,CAACC,OAAO,CAACkB,SAAS,EAAGX,KAAK,KAAM;EAAE,GAAGA,KAAK;EAAEH,SAAS,EAAE;AAAI,CAAE,CAAC,CAAC;AAGjE;AACAL,EAAE,CAACC,OAAO,CAACmB,gBAAgB,EAAE,CAACZ,KAAK,EAAE;EAAEL;AAAK,CAAE,MAAM;EAClD,GAAGK,KAAK;EACRL,KAAK,EAAEA,KAAK;EACZC,KAAK,EAAE,EAAE;EACTC,SAAS,EAAE;CACZ,CAAC,CAAC;AAGH;AACAL,EAAE,CAACC,OAAO,CAACoB,gBAAgB,EAAE,CAACb,KAAK,EAAE;EAAEJ;AAAK,CAAE,MAAM;EAClD,GAAGI,KAAK;EACRJ,KAAK,EAAEA,KAAK;EACZC,SAAS,EAAE;CACZ,CAAC,CAAC,CACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}